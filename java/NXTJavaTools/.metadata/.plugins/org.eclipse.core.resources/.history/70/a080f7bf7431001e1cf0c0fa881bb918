package main;

import java.util.List;

import javax.usb.*;

public class test {
	public static void main(String[] args) throws SecurityException, UsbException {
		UsbServices usbServices = UsbHostManager.getUsbServices();
		UsbHub rootHub = usbServices.getRootUsbHub();
		short NXT_DEVICE_ID = 7;
		short NXT_PRODUCT_ID = (short) ((byte) 0x0694002);
		UsbDevice NXT = findDevice(rootHub, NXT_DEVICE_ID, NXT_PRODUCT_ID);
	}

	public static UsbDevice findDevice(UsbHub hub, short vendorId, short productId) {
		for (UsbDevice device : (List<UsbDevice>) hub.getAttachedUsbDevices()) {
			UsbDeviceDescriptor desc = device.getUsbDeviceDescriptor();
			if (desc.idVendor() == vendorId && desc.idProduct() == productId)
				return device;
			if (device.isUsbHub()) {
				device = findDevice((UsbHub) device, vendorId, productId);
				if (device != null)
					return device;
			}
		}
		return null;
	}
}
